@page
@model SailingWeb.Pages.ControlRacersModel
@{
    ViewData["Title"] = "ControlRacers";
}
<script src="https://code.jquery.com/jquery-3.3.1.min.js"
        integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
        crossorigin="anonymous"></script>
<style>
    table, th, td {
        border: 1px solid black;
        width: 100%;
        padding: 2px;
    }
    /* Style buttons */
    .btn {
        background-color: DodgerBlue; /* Blue background */
        border: none; /* Remove borders */
        color: white; /* White text */
        padding: 12px 16px; /* Some padding */
        font-size: 16px; /* Set a font size */
        cursor: pointer; /* Mouse pointer on hover */
    }

        /* Darker background on mouse-over */
        .btn:hover {
            background-color: RoyalBlue;
        }
</style>
<h2>ControlRacers</h2>
<table>
    <tr>
        <th>Name</th>
        <th>Boat Class</th>
        <th>Boat Number</th>
        <th>Boat Py</th>
        <th>Remove</th>
    </tr>
    @foreach (var item in Sql.GetFulllist())
    {
        <tr>
            <td>@item.Key</td>
            <td></td>
            <td></td>
            <td></td>
            <td>
                <button type="button" class="btn-danger" onclick="removeall('@item.Key')">Remove person</button>
            </td>
        </tr>
        foreach (var item1 in item.Value)
        {
            <tr>
                <td></td>
                <td>@item1.Item1</td>
                <td>@item1.Item2</td>
                <td>@item1.Item3</td>
                <td>
                    <button type="button" class="btn-default"onclick="remove('@item.Key', '@item1.Item1', '@item1.Item2', @item1.Item3)">Remove</button>
                </td>
            </tr>
        }
    }
</table>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
<script>

    function removeall(name) {
        bootbox.confirm("Are you sure you want to remove " + name, function (result) {
            if (result) {


                $.ajax({
                    url: "/Folder/RemoveFulllistAll",
                    data: { person: name },
                    headers: {
                        RequestVerificationToken:
                            $('input:hidden[name="__RequestVerificationToken"]').val()
                    },
                    success: function (data) {

                        location.reload(true);
                    }
                })
                }

        });
    }
    
    function remove(name, boatclass, number, py) {
        $.ajax({
            url: "/Folder/RemoveFulllist",
            data: { person: name, bclass: boatclass, boatnumber: number, boatpy: py },
            headers: {
                RequestVerificationToken:
                    $('input:hidden[name="__RequestVerificationToken"]').val()
            },
            success: function (data) {

                location.reload(true);
            }

        });
    }
</script>